<!DOCTYPE html>
<html lang="en">
    <head> <!--Simple Starting Tamplate-->
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="preconnect" href="https://fonts.googleapis.com"/>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
        <!-- I'm using Press Start 2P gaming font from Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"/>
        <script src="https://kit.fontawesome.com/ccbd4d6bc1.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="styles.css"/>
        <title>BEST_PORTFOLIO_EVER</title>
        <style>body {font-family: 'Press Start 2P', cursive, sans-serif !important;}</style>
    </head>
    <body>
        <!--screen-->
        <div class="screen">
            <div id = "videoContainer" 
            style="width: 100%; max-width: 600px;">
            <!--Video Backround File (Me Coding)-->
            <video autoplay loop muted id="VideoBackround">
                <source src="Videos/Video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            </div>
            
            <!--Audio Of Button Click (Gunshot)-->
            <audio id="ButtonGunShot">
                <source src="Sounds/ButtonsGunShot.mp3"> 
            </audio>
            
            <!--Audio Of Button Hover (Retro)-->
            <audio id="ButtonHover">
                <source src="Sounds/ButtonHover.mp3"> 
            </audio>

            <audio id = "Ambience">
                <source src="Sounds/Ambience.mp3">
            </audio>

            <!--GameMenu-->
            <div class="GameMenu">
                <h1>BEST PORTFOLIO EVER</h1>
                <h3>By BarUrakbaev </h3>
                <ul>
                    <li><a href="#">Play</a></li>
                    <li><a href="#">Explore</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Hire Me</a></li>
                </ul>
            </div>
        </div>
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: 'Roboto', sans-serif;
                background-color: #000;
            }
            .screen {
                position: relative;
                width: 100%;
                height: 100vh;
                overflow: hidden;
            }
            #VideoBackround {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            .GameMenu {
                position: absolute;
                top: 50%;
                left: 5vw;
                transform: translateY(-50%);
                text-align: left;
                color: white;
                max-width: 90vw;
                width: 30vw;
                min-width: 800px;
                box-sizing: border-box;
            }
            .GameMenu h1 {
                margin: 0.0em 0;
                font-size: 2.4vw;
                line-height: 2.2;
                word-break: break-word;
            }
            .GameMenu h3 {
                margin: 0.0em 0;
                font-size: 1.5vw;
                line-height: 1.2; 
                word-break: break-word;
            }

            .GameMenu ul li a {
                color: #C7C7C7;
                text-decoration: none;
                font-size: 1.1vw;
                padding: 0.3em 0.5em;
                display: inline-block;
                max-width: 100%;
                box-sizing: border-box;
            }
            .GameMenu ul li a:hover {
                color: #fff; /* Change color on hover */
            }  

            video {
                max-width: 100%;
                height: auto;
            }
            
            /* Glow effect only on keyboard focus, mouse is MIA sorry bro */
            .GameMenu h1:focus-visible,
            .GameMenu h3:focus-visible,
            .GameMenu ul li a:focus-visible {
            color: #fff;
            text-shadow: 0 0 10px #fff, 0 0 20px #fff;
            transition: color 0.3s, text-shadow 0.3s;
            outline: none;
            }

        </style>
        
        <script>

            //Elements
            const video = document.getElementById('VideoBackround');
            const audio = document.getElementById('Ambience')
            const audioclick = document.getElementById("ButtonGunShot");
            const audiohover = document.getElementById("ButtonHover");

            // Menu container
            const gameMenu = document.querySelector('.GameMenu');
            let currentMenu = "main";
            let submenuLinks = [];

            /* --- Submenu Data --- */
            const menuData = {
                Play: {
                    title: "PLAY MENU",
                    subtitle: "Choose your adventure",
                    items: [
                        { label: "Load a Game", href: "#" },
                        { label: "Load a Game Source Code", href: "#" },
                        { label: "Games List", href: "#" },
                        { label: "Games Background", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Explore: {
                    title: "EXPLORE MENU",
                    subtitle: "Discover more",
                    items: [
                        { label: "Game Development", href: "#" },
                        { label: "3D Modeling", href: "#" },
                        { label: "Art Gallery", href: "#" },
                        { label: "Graphics Development", href: "#" },
                        { label: "Sound Design", href: "#" },
                        { label: "Animations", href: "#" },
                        { label: "Web Development", href: "#" },
                        { label: "Community Projects", href: "Community" },
                        { label: "Music By Me", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Community: {
                    title: "COMMUNITY PROJECTS",
                    subtitle: "Collaborative works",
                    items: [
                        { label: "The Re:Stellar Project", href: "ReStellar.html" },
                        { label: "Back", href: "Explore" }
                    ]
                },
                Contact: {
                    title: "CONTACT MENU",
                    subtitle: "Let's connect",
                    items: [
                        { label: "Email", href: "#" },
                        { label: "LinkedIn", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                About: {
                    title: "ABOUT MENU",
                    subtitle: "Who am I?",
                    items: [
                        { label: "Bio", href: "#" },
                        { label: "Skills", href: "#" },
                        { label: "Hire History", href: "#" },
                        { label: "List Of Projects", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Hire: {
                    title: "HIRE ME",
                    subtitle: "Choose my role",
                    items: [
                        { label: "Freelance", href: "#" },
                        { label: "Full-time", href: "#" },
                        { label: "Part Time", href: "#" },
                        { label: "Volunteer", href: "#" },
                        { label: "Collaboration", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                }
            };

            function hoverSound() {
                audiohover.currentTime = 0;
                audiohover.play().catch(function(e) {
                    // Optionally log or handle play errors (e.g., user gesture required)
                    // console.log("Hover sound play failed:", e);
                });
            }

            // Play ambience audio in loop
            audio.loop = true;
            audio.volume = 1.0; // Adjust volume as needed

            // Try to play ambience after user interaction (required by most browsers)
            function tryPlayAmbience() {
                audio.play().catch(function(e) {
                    // Still failed, wait for next interaction
                });
                document.removeEventListener('keydown', tryPlayAmbience);
                document.removeEventListener('click', tryPlayAmbience);
            }

            // Attempt to play immediately (may fail)
            audio.play().catch(function(e) {
                document.addEventListener('keydown', tryPlayAmbience);
                document.addEventListener('click', tryPlayAmbience);
            });

            // Hide mouse cursor and disable mouse input
            document.body.style.cursor = "none";
            document.addEventListener('mousemove', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('mousedown', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('mouseup', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            function renderMenu(menuKey) {
                let html = "";
                if (menuKey === "main") {
                    html = `
                        <h1>BEST PORTFOLIO EVER</h1>
                        <h3>By BarUrakbaev </h3>
                        <ul>
                            <li><a href="#" data-menu="Play">Play</a></li>
                            <li><a href="#" data-menu="Explore">Explore</a></li>
                            <li><a href="#" data-menu="Contact">Contact</a></li>
                            <li><a href="#" data-menu="About">About</a></li>
                            <li><a href="#" data-menu="Hire">Hire Me</a></li>
                        </ul>
                    `;
                } else {
                    const data = menuData[menuKey];
                    html = `
                        <h1>${data.title}</h1>
                        <h3>${data.subtitle}</h3>
                        <ul>
                            ${data.items.map(item =>
                                item.href && !menuData[item.href] && item.href !== "main" && item.href !== "Explore"
                                    ? `<li><a href="${item.href}" data-external="true">${item.label}</a></li>`
                                    : `<li><a href="#" data-menu="${item.href}">${item.label}</a></li>`
                            ).join("")}
                        </ul>
                    `;
                }
                gameMenu.innerHTML = html;

                // Remove default list styling and set li styles
                const ul = gameMenu.querySelector('ul');
                if (ul) {
                    ul.style.listStyle = 'none';
                    ul.style.padding = '0';
                    ul.style.margin = '1.5em 0';
                }
                gameMenu.querySelectorAll('ul li').forEach(li => {
                    li.style.display = 'block';
                    li.style.margin = '0.7em 0';
                });

                submenuLinks = Array.from(gameMenu.querySelectorAll('ul li a'));
                submenuLinks.forEach(link => {
                    link.setAttribute('tabindex', '0');
                    link.addEventListener("mouseenter", hoverSound);
                    if (!link.hasAttribute('data-external')) {
                        link.addEventListener("click", menuClickHandler);
                    } else {
                        link.addEventListener("click", function(e) {
                            audioclick.currentTime = 0;
                            audioclick.play();
                            window.location.href = link.getAttribute('href');
                        });
                    }
                });
                // Set initial focus
                setTimeout(() => submenuLinks[0]?.focus(), 0);
            }

            function menuClickHandler(e) {
                e.preventDefault();
                audioclick.currentTime = 0;
                audioclick.play();
                const menuAttr = e.target.getAttribute('data-menu');
                // If in submenu and "Back" is pressed, go back to main
                if (currentMenu !== "main" && menuAttr === "main") {
                    currentMenu = "main";
                    renderMenu(currentMenu);
                }
                // If in Community submenu and "Back" is pressed, go back to Explore
                else if (currentMenu === "Community" && menuAttr === "Explore") {
                    currentMenu = "Explore";
                    renderMenu(currentMenu);
                }
                // If in Explore submenu and "Community" is pressed, go to Community
                else if (currentMenu === "Explore" && menuAttr === "Community") {
                    currentMenu = "Community";
                    renderMenu(currentMenu);
                }
                // Allow keyboard navigation to open external links
                else if (e.target.hasAttribute('data-external')) {
                    window.location.href = e.target.getAttribute('href');
                }
                // If the menuAttr matches a submenu, render that submenu
                else if (menuAttr && menuData[menuAttr]) {
                    currentMenu = menuAttr;
                    renderMenu(currentMenu);
                }
            }

            // Initial render
            renderMenu("main");

            // Keyboard navigation for submenu
            document.addEventListener('keydown', function(e) {
                const focusable = submenuLinks;
                const current = document.activeElement;
                let idx = focusable.indexOf(current);

                if (focusable.length === 0) return;

                if (e.key === 'ArrowDown' || (e.key === 'Tab' && !e.shiftKey)) {
                    e.preventDefault();
                    idx = (idx + 1) % focusable.length;
                    focusable[idx].focus();
                    hoverSound();
                } else if (e.key === 'ArrowUp' || (e.key === 'Tab' && e.shiftKey)) {
                    e.preventDefault();
                    idx = (idx - 1 + focusable.length) % focusable.length;
                    focusable[idx].focus();
                    hoverSound();
                } else if (e.key === 'Enter' && focusable.includes(current)) {
                    current.click();
                }
            });

            // Set initial focus to first link
            window.onload = function() {
                const links = document.querySelectorAll(".GameMenu ul a");
                if (links.length > 0) links[0].focus();
            };
        </script>
    </body>
</html>

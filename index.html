<!DOCTYPE html>
<html lang="en">
    <head> <!--Simple Starting Tamplate-->
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="preconnect" href="https://fonts.googleapis.com"/>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
        <!-- I'm using Press Start 2P gaming font from Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"/>
        <script src="https://kit.fontawesome.com/ccbd4d6bc1.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="styles.css"/>
        <title>BEST_PORTFOLIO_EVER</title>
        <style>body {font-family: 'Press Start 2P', cursive, sans-serif !important;}</style>
    </head>
    <body>
        <!--screen-->
        <div class="screen">
            <div id = "videoContainer" 
            style="width: 100%; max-width: 600px;">
            <!--Video Backround File (Me Coding)-->
            <video autoplay loop muted id="VideoBackround">
                <source src="Videos/Video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            </div>
            
            <!--Audio Of Button Click (Gunshot)-->
            <audio id="ButtonGunShot">
                <source src="Sounds/ButtonsGunShot.mp3"> 
            </audio>
            
            <!--Audio Of Button Hover (Retro)-->
            <audio id="ButtonHover">
                <source src="Sounds/ButtonHover.mp3"> 
            </audio>

            <audio id = "Ambience">
                <source src="Sounds/Ambience.mp3">
            </audio>
            <!--GameMenu-->
            <!--GameMenu-->
            <div class="GameMenu">
                <h1>BEST PORTFOLIO EVER</h1>
                <h3>By BarUrakbaev </h3>
                <ul>
                    <li><a href="#">Play</a></li>
                    <li><a href="#">Explore</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Hire Me</a></li>
                </ul>
            </div>
        </div>
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: 'Roboto', sans-serif;
                background-color: #000;
            }
            .screen {
                position: relative;
                width: 100%;
                height: 100vh;
                overflow: hidden;
            }
            #VideoBackround {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            .GameMenu {
                position: absolute;
                top: 50%;
                left: 5vw;
                transform: translateY(-50%);
                text-align: left;
                color: white;
                max-width: 90vw;
                width: 30vw;
                min-width: 800px;
                box-sizing: border-box;
            }
            .GameMenu h1 {
                margin: 0.0em 0;
                font-size: 2.4vw;
                line-height: 2.2;
                word-break: break-word;
            }
            .GameMenu h3 {
                margin: 0.0em 0;
                font-size: 1.5vw;
                line-height: 1.2; 
                word-break: break-word;
            }

            .GameMenu ul li a {
                color: #C7C7C7;
                text-decoration: none;
                font-size: 1.1vw;
                padding: 0.3em 0.5em;
                display: inline-block;
                max-width: 100%;
                box-sizing: border-box;
            }
            .GameMenu ul li a:hover {
                color: #fff; /* Change color on hover */
            }  

            video {
                max-width: 100%;
                height: auto;
            }
            
            /* Glow effect only on keyboard focus, mouse is MIA sorry bro */
            .GameMenu h1:focus-visible,
            .GameMenu h3:focus-visible,
            .GameMenu ul li a:focus-visible {
            color: #fff;
            text-shadow: 0 0 10px #fff, 0 0 20px #fff;
            transition: color 0.3s, text-shadow 0.3s;
            outline: none;
            }

        </style>
        
        <script>

            //Elements
            const video = document.getElementById('VideoBackround');
            const audio = document.getElementById('Ambience')
            const audioclick = document.getElementById("ButtonGunShot");
            const audiohover = document.getElementById("ButtonHover");

            // Menu container
            const gameMenu = document.querySelector('.GameMenu');
            let currentMenu = "main";
            let submenuLinks = [];

            /* --- Submenu Data --- */
            const menuData = {
                Play: {
                    title: "PLAY MENU",
                    subtitle: "Choose your adventure",
                    items: [
                        { label: "Load a Game", href: "#" },
                        { label: "Load a Game Source Code", href: "#" },
                        { label: "Games List", href: "#" },
                        { label: "Games Background", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Explore: {
                    title: "EXPLORE MENU",
                    subtitle: "Discover more",
                    items: [
                        { label: "Game Development", href: "#" },
                        { label: "3D Modeling", href: "#" },
                        { label: "Art Gallery", href: "#" },
                        { label: "Graphics Development", href: "#" },
                        { label: "Sound Design", href: "#" },
                        { label: "Animations", href: "#" },
                        { label: "Web Development", href: "#" },
                        { label: "Community Projects", href: "Community" },
                        { label: "Music By Me", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Community: {
                    title: "COMMUNITY PROJECTS",
                    subtitle: "Collaborative works",
                    items: [
                        { label: "The Re:Stellar Project", href: "ReStellar.html" },
                        { label: "Back", href: "Explore" }
                    ]
                },
                Contact: {
                    title: "CONTACT MENU",
                    subtitle: "Let's connect",
                    items: [
                        { label: "Email", href: "#" },
                        { label: "LinkedIn", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                About: {
                    title: "ABOUT MENU",
                    subtitle: "Who am I?",
                    items: [
                        { label: "Bio", href: "#" },
                        { label: "Skills", href: "#" },
                        { label: "Hire History", href: "#" },
                        { label: "List Of Projects", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                },
                Hire: {
                    title: "HIRE ME",
                    subtitle: "Choose my role",
                    items: [
                        { label: "Freelance", href: "#" },
                        { label: "Full-time", href: "#" },
                        { label: "Part Time", href: "#" },
                        { label: "Volunteer", href: "#" },
                        { label: "Collaboration", href: "#" },
                        { label: "Back", href: "main" }
                    ]
                }
            };

            function hoverSound() {
                audiohover.currentTime = 0;
                audiohover.play().catch(function(e) {
                    // Optionally log or handle play errors (e.g., user gesture required)
                    // console.log("Hover sound play failed:", e);
                });
            }

            // Play ambience audio in loop
            audio.loop = true;
            audio.volume = 1.0; // Adjust volume as needed

            // Try to play ambience after user interaction (required by most browsers)
            function tryPlayAmbience() {
                audio.play().catch(function(e) {
                    // Still failed, wait for next interaction
                });
                document.removeEventListener('keydown', tryPlayAmbience);
                document.removeEventListener('click', tryPlayAmbience);
            }

            // Attempt to play immediately (may fail)
            audio.play().catch(function(e) {
                document.addEventListener('keydown', tryPlayAmbience);
                document.addEventListener('click', tryPlayAmbience);
            });

            // Hide mouse cursor and disable mouse input
            document.body.style.cursor = "none";
            document.addEventListener('mousemove', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('mousedown', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('mouseup', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            }, { passive: false });

            function renderMenu(menuKey) {
                let html = "";
                if (menuKey === "main") {
                    html = `
                        <h1>BEST PORTFOLIO EVER</h1>
                        <h3>By BarUrakbaev </h3>
                        <ul>
                            <li><a href="#" data-menu="Play">Play</a></li>
                            <li><a href="#" data-menu="Explore">Explore</a></li>
                            <li><a href="#" data-menu="Contact">Contact</a></li>
                            <li><a href="#" data-menu="About">About</a></li>
                            <li><a href="#" data-menu="Hire">Hire Me</a></li>
                        </ul>
                    `;
                } else {
                    const data = menuData[menuKey];
                    html = `
                        <h1>${data.title}</h1>
                        <h3>${data.subtitle}</h3>
                        <ul>
                            ${data.items.map(item =>
                                item.href && !menuData[item.href] && item.href !== "main" && item.href !== "Explore"
                                    ? `<li><a href="${item.href}" data-external="true">${item.label}</a></li>`
                                    : `<li><a href="#" data-menu="${item.href}">${item.label}</a></li>`
                            ).join("")}
                        </ul>
                    `;
                }
                gameMenu.innerHTML = html;

                // Remove default list styling and set li styles
                const ul = gameMenu.querySelector('ul');
                if (ul) {
                    ul.style.listStyle = 'none';
                    ul.style.padding = '0';
                    ul.style.margin = '1.5em 0';
                }
                gameMenu.querySelectorAll('ul li').forEach(li => {
                    li.style.display = 'block';
                    li.style.margin = '0.7em 0';
                });

                submenuLinks = Array.from(gameMenu.querySelectorAll('ul li a'));
                submenuLinks.forEach(link => {
                    link.setAttribute('tabindex', '0');
                    link.addEventListener("mouseenter", hoverSound);
                    if (!link.hasAttribute('data-external')) {
                        link.addEventListener("click", menuClickHandler);
                    } else {
                        link.addEventListener("click", function(e) {
                            audioclick.currentTime = 0;
                            audioclick.play();
                            window.location.href = link.getAttribute('href');
                        });
                    }
                });
                // Set initial focus
                setTimeout(() => submenuLinks[0]?.focus(), 0);
            }

            function menuClickHandler(e) {
                e.preventDefault();
                audioclick.currentTime = 0;
                audioclick.play();
                const menuAttr = e.target.getAttribute('data-menu');
                // If in submenu and "Back" is pressed, go back to main
                if (currentMenu !== "main" && menuAttr === "main") {
                    currentMenu = "main";
                    renderMenu(currentMenu);
                }
                // If in Community submenu and "Back" is pressed, go back to Explore
                else if (currentMenu === "Community" && menuAttr === "Explore") {
                    currentMenu = "Explore";
                    renderMenu(currentMenu);
                }
                // If in Explore submenu and "Community" is pressed, go to Community
                else if (currentMenu === "Explore" && menuAttr === "Community") {
                    currentMenu = "Community";
                    renderMenu(currentMenu);
                }
                // Allow keyboard navigation to open external links
                else if (e.target.hasAttribute('data-external')) {
                    window.location.href = e.target.getAttribute('href');
                }
                // If the menuAttr matches a submenu, render that submenu
                else if (menuAttr && menuData[menuAttr]) {
                    currentMenu = menuAttr;
                    renderMenu(currentMenu);
                }
            }

            // Initial render
            renderMenu("main");

            // Ensure Art Gallery click handler is attached after Explore menu is rendered
            document.addEventListener('click', function() {
                if (currentMenu === "Explore") {
                    interceptGalleryMenu();
                }
            });

            // Keyboard navigation for submenu
            document.addEventListener('keydown', function(e) {
                const focusable = submenuLinks;
                const current = document.activeElement;
                let idx = focusable.indexOf(current);

                if (focusable.length === 0) return;

                if (e.key === 'ArrowDown' || (e.key === 'Tab' && !e.shiftKey)) {
                    e.preventDefault();
                    idx = (idx + 1) % focusable.length;
                    focusable[idx].focus();
                    hoverSound();
                } else if (e.key === 'ArrowUp' || (e.key === 'Tab' && e.shiftKey)) {
                    e.preventDefault();
                    idx = (idx - 1 + focusable.length) % focusable.length;
                    focusable[idx].focus();
                    hoverSound();
                } else if (e.key === 'Enter' && focusable.includes(current)) {
                    current.click();
                }
            });

            // Set initial focus to first link
            window.onload = function() {
                const links = document.querySelectorAll(".GameMenu ul a");
                if (links.length > 0) links[0].focus();
            };
        </script>
        <!-- Under Construction Banner -->
<div style="
    position: fixed;
    top: 20px;
    right: 30px;
    z-index: 9999;
    background: rgba(0,0,0,0.85);
    color: #FFD700;
    font-family: 'Press Start 2P', cursive, sans-serif;
    font-size: 1vw;
    padding: 0.8em 1.5em;
    border-radius: 10px;
    box-shadow: 0 0 12px #FFD700, 0 0 2px #fff;
    letter-spacing: 1px;
    pointer-events: none;
    user-select: none;
">
    This Site is Under Construction
</div>
    <!-- Art Gallery Modal (hidden by default) -->
    <div id="artGalleryModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.97); z-index:10000; align-items:center; justify-content:center; flex-direction:column;">
        <button id="closeGalleryBtn" style="position:absolute; top:2vw; right:3vw; font-size:2vw; background:none; border:none; color:#FFD700; cursor:pointer;">&times; Close</button>
        <div id="galleryContent" style="display:flex; flex-direction:column; align-items:center;">
            <img id="galleryImage" src="" alt="Art" style="max-width:80vw; max-height:70vh; border:6px solid #FFD700; border-radius:12px; box-shadow:0 0 30px #FFD700;">
            <div style="margin-top:1em;">
                <button id="prevImage" style="font-size:1.2vw; margin-right:2vw; background:#222; color:#FFD700; border:none; border-radius:6px; padding:0.5em 1.5em; cursor:pointer;">&#8592; Prev</button>
                <button id="nextImage" style="font-size:1.2vw; background:#222; color:#FFD700; border:none; border-radius:6px; padding:0.5em 1.5em; cursor:pointer;">Next &#8594;</button>
            </div>
            <div id="galleryCaption" style="color:#FFD700; margin-top:1em; font-size:1vw; text-align:center;"></div>
        </div>
    </div>
    <script>
        // --- Add Art Gallery external link logic to Explore submenu ---
        // Find the "Art Gallery" item in Explore and set its href to ArtGallery.html (now handled by modal)
        const exploreItems = menuData.Explore.items;
        for (let item of exploreItems) {
            if (item.label === "Art Gallery") {
                item.href = "#";
                item.isGallery = true; // Custom flag for gallery
            }
        }

        // Art Gallery Data (replace with your own images and captions)
        const artGalleryImages = [
            { src: "./ArtGallery/BestProtfolioEver_WebsiteMainMenu_RoughSketchOfThe3D_Scene_1ST_Layer.jpg", caption: "Rough Sketch of the 3D Scene - 1st Layer" },
            { src: "./ArtGallery/BestProtfolioEver_WebsiteMainMenu_RoughSketchOfThe3D_Scene_2Snd_Layer.jpg", caption: "Rough Sketch of the 3D Scene - 2nd Layer" },
            { src: "./ArtGallery/art1.jpg", caption: "Digital Landscape #1" },
            { src: "./ArtGallery/art2.jpg", caption: "Retro Pixel Portrait" },
            { src: "./ArtGallery/art3.jpg", caption: "3D Render: Neon City" },
            { src: "./ArtGallery/art4.jpg", caption: "Concept Sketch: Spaceship" }
        ];

        // Gallery modal logic
        let currentArtIndex = 0;
        const modal = document.getElementById('artGalleryModal');
        const galleryImg = document.getElementById('galleryImage');
        const galleryCaption = document.getElementById('galleryCaption');
        const closeBtn = document.getElementById('closeGalleryBtn');
        const prevBtn = document.getElementById('prevImage');
        const nextBtn = document.getElementById('nextImage');

        function showGallery(index = 0) {
            if (!artGalleryImages.length) return;
            currentArtIndex = index;
            updateGallery();
            modal.style.display = "flex";
            setTimeout(() => closeBtn.focus(), 100);
            document.body.style.overflow = "hidden";
        }

        function updateGallery() {
            const img = artGalleryImages[currentArtIndex];
            galleryImg.src = img.src;
            galleryImg.alt = img.caption;
            galleryCaption.textContent = img.caption;
        }

        function hideGallery() {
            modal.style.display = "none";
            document.body.style.overflow = "";
        }

        prevBtn.onclick = function() {
            currentArtIndex = (currentArtIndex - 1 + artGalleryImages.length) % artGalleryImages.length;
            updateGallery();
        };
        nextBtn.onclick = function() {
            currentArtIndex = (currentArtIndex + 1) % artGalleryImages.length;
            updateGallery();
        };
        closeBtn.onclick = hideGallery;

        // Keyboard navigation for modal
        modal.addEventListener('keydown', function(e) {
            if (e.key === "Escape") hideGallery();
            if (e.key === "ArrowLeft") prevBtn.click();
            if (e.key === "ArrowRight") nextBtn.click();
        });

        // Intercept Art Gallery menu click
        function interceptGalleryMenu() {
            submenuLinks.forEach(link => {
                if (link.textContent.trim() === "Art Gallery") {
                    link.removeEventListener("click", menuClickHandler);
                    link.addEventListener("click", function(e) {
                        e.preventDefault();
                        audioclick.currentTime = 0;
                        audioclick.play();
                        showGallery();
                    });
                }
            });
        }

        // Patch renderMenu to call interceptGalleryMenu after rendering Explore
        const origRenderMenu = renderMenu;
        renderMenu = function(menuKey) {
            origRenderMenu(menuKey);
            if (menuKey === "Explore") interceptGalleryMenu();
        };

        // If Explore is already rendered, patch links
        if (currentMenu === "Explore") interceptGalleryMenu();
    </script>
</body>
</html>
